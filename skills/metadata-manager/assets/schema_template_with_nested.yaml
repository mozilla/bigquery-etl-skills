# TIP: Use base schemas to auto-populate descriptions for standard fields:
# ./bqetl query schema update <dataset>.<table> --use-global-schema
# Preview changes first: python scripts/preview_base_schema.py <dataset>.<table>
#
# Standard fields in global.yaml: submission_date, client_id, sample_id, country,
# dau, wau, mau, normalized_channel, etc.
# See: bigquery_etl/schema/global.yaml for full list

fields:
  - name: submission_date
    type: DATE
    mode: NULLABLE
    description: Date when the data was submitted
  - name: client_id
    type: STRING
    mode: NULLABLE
    description: Unique identifier for the client
  - name: tags
    type: STRING
    mode: REPEATED
    description: List of tags associated with the event
  - name: experiments
    type: RECORD
    mode: REPEATED
    description: List of active experiments for this client
    fields:
      - name: key
        type: STRING
        mode: NULLABLE
        description: Experiment identifier
      - name: value
        type: RECORD
        mode: NULLABLE
        description: Experiment enrollment details
        fields:
          - name: branch
            type: STRING
            mode: NULLABLE
            description: Experiment branch name
          - name: enrollment_id
            type: STRING
            mode: NULLABLE
            description: Unique enrollment identifier
